# ACID이란?

트랜잭션을 보장하는 4가지의 성격을 나타낸다

- **Atomicity** (원자성)
- **Consistency** (일관성)
- **Isolation** (독립성)
- **Durability** (지속성)


```
모든 글은 주관적인 생각이 첨가되었다는 것을 조심해주세요 (주의!)
```

### 1. Atomicity (원자성)

한마디로 정의하자면 전체 데이터베이스 트랜잭션의 무결성을 의미한다!

- 간단하게 적힌 글들을 보면 트랜잭션에 포함된 작업이 모두 실행되던지 모두 실행되지 않아야 된다는 글이 많다.
  - 트랜잭션 안에서 한 쿼리가 실패하게 되면 롤백하는 경우를 표현한다고 보면 된다.
- 좀 더 쉽게 생각해보기 위해 이름을 보면 원자이다! 원자가 무엇이냐
  - `원자(atom)는 물질을 이루고 있는 기본적인 구성단위입니다. 모든 물질을 구성하는 기본적인 요소인 원소의 화학적 성질을 갖는 최소 단위이다.`
  - 결국 최소 단위임으로 한 부분이라도 예상대로 작동하지 않는다면 다른 부분도 실패하여 처음으로 돌아간다로 이해하였다.


```
example

쇼핑을 하게 될 때 결제를 하려면 장바구니에 항목이 있어야 한다.
하지만 장바구니에 없다면 비용을 지불할 수 없다.
장바구니에 무언가를 추가하고 비용을 지불하지 않을 수는 있지만 
해당 트랜잭션은 완료되지 않음으로 비용을 지불할 떄까지는 트랜잭션이 완료되지 않은 것이다.
```
[참조 글](https://mariadb.com/ko/resources/blog/acid-compliance-what-it-means-and-why-you-should-care/)


### 2. Consistency (일관성)

- 트랜잭션이 끝난 후에도 데이터베이스는 일관성을 유지해야한다.
  - 예시 하나로 바로 이해가 가능하다. 
```
  example
  
  not null로 설정되어 있는 컬럼은 무조건 값이 들어가야 있어야한다.
  ```


### 3. Isolation (독립성)

- 트랜잭션을 수행하는 도중에는 다른 작업이 관여할 수 없다.
- 그래서 db마다의 독립성 레벨이 있다.

```
example

처음 price 1000에서 10000으로 바꾸는 트랜잭션이 걸려있는 작업을 하고 있을 때
price를 조회하는 작업이 들어오면 예전 값인 1000이 조회가 되어야 한다.
( level 3 )
```

### 4. Durability (지속성)

- 성공적으로 트랜잭션이 수행되었다면 그 결과는 완전히 반영이 되어야 한다.
- 완전히 반영되면 로그 혹은 다른 시스템에 저장하게 되어야 한다.
- 후에 이 로그를 이용해서 트랜잭션 수행전 상태로 되돌릴 수 있어야 한다. 
- 때문에 트랜잭션은 로그저장이 완료된 시점에서 종료가 되어야 한다.

```
example

티켓을 구매를 완료한 후 시스템이 다운되어도 티켓 구매한 결과는 영원히 남아있어야 한다.
```