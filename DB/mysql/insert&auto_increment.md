## 1. ì´ ì£¼ì œë¥¼ ë‹¤ë£¨ëŠ” ì´ìœ 

pkë¥¼ **auto_increment**ë¡œ ì§€ì • í›„ insertë¡œ ê°’ì„ ì¶”ê°€í•˜ëŠ” APIë¥¼ ë§Œë“¤ê³  ìˆì—ˆë‹¤.
ê·¸ë¦¬ê³  í™•ì¸í•˜ëŠ”ë° insert ì‹¤íŒ¨í•œ ê²½ìš°ë¥¼ ë„˜ì–´ 3ì—ì„œ 10ìœ¼ë¡œ ë°”ë¡œ pkê°’ì´ ë„˜ì–´ê°€ ìˆì—ˆë‹¤.ğŸ™„
ê·¸ë˜ì„œ í•œ ë²ˆ ì•Œì•„ë³´ì•˜ë‹¤.


## 2. insert ì‹¤íŒ¨ ì‹œì—ë„ ì¦ê°€í•˜ëŠ” ì´ìœ 

> ì´ìœ ë¶€í„° ê°„ë‹¨í•˜ê²Œ ë§í•˜ë©´ auto_increment_lock_mode ë•Œë¬¸ì´ë‹¤.


#### auto_increment_lock_mode ê°’ì˜ ì°¨ì´ (0 ~ 2)

##### 1.  0ì¼ ë•Œ (tranditional)
ëª¨ë“  insertë¥¼ ëŒ€ìƒìœ¼ë¡œ í…Œì´ë¸” ë ˆë²¨ì˜ AUTO_LOCKë¥¼ ì‚¬ìš©í•œë‹¤.
**insert ê²°ê³¼ë¥¼ ì˜ˆì¸¡í•˜ì—¬ ì¸ë±ìŠ¤ì˜ ìˆœì„œë¥¼ ë³´ì¥í•˜ê¸° ìœ„í•´ ëª¨ë“  êµ¬ë¬¸ë§ˆë‹¤ ë½ì„ ê±¸ì–´ ê²€ì‚¬í•œë‹¤.**
ê·¸ë˜ì„œ auto_incrementë¡œ ë˜ì–´ ìˆëŠ” ì¸ë±ìŠ¤ì˜ ìˆœì„œë¥¼ ë³´ì¥í•˜ê¸° ìœ„í•´ì„  ì´ ì„¤ì •ì„ í•´ì£¼ë©´ ëœë‹¤.


##### 2. 1ì¼ ë•Œ (consecutive)
ê¸°ë³¸ê°’ìœ¼ë¡œ ì§€ì •ë˜ì–´ ìˆëŠ” ì„¤ì •ì´ë‹¤.
êµ¬ë¬¸ë§ˆë‹¤ ë½ì´ ê±¸ë¦¬ì§€ë§Œ í• ë‹¹ í”„ë¡œì„¸ìŠ¤ ë‹¨ìœ„ë¡œ ë½ì´ ê±¸ë¦°ë‹¤.
AUTO_INCREMENT valuesì˜ í• ë‹¹ ê³¼ì •ì—ì„œë§Œ mutexë¥¼ ì´ìš©í•´ì„œ ë™ì‹œ ì ‘ê·¼ì„ ì œì–´í•˜ê¸° ë•Œë¬¸ì— í™•ì¥ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.

##### 3. 2ì¼ ë•Œ (interleaved)
ë½ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
í™•ì¥ì„±ì€ ê°€ì¥ ë†’ì§€ë§Œ ë³µêµ¬ê°€ ì–´ë µë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. ì™œëƒí•˜ë©´ ë³µêµ¬/ë³µì œìš© ë¡œê·¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì—ë§Œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
ë‹¨ìˆœíˆ ìœ ë‹ˆí¬ ê°’ì€ ì§€ì¼œì£¼ì§€ë§Œ ì‹¤í–‰ ìˆœì„œì— ë”°ë¼ ë‹¨ì¡°ì ìœ¼ë¡œ ì˜¬ë¼ê°€ê¸° ë•Œë¬¸ì— ìˆœì°¨ì ì´ì§€ ëª»í•œ auto_incrementê°’ì´ ë‚˜íƒ€ë‚  ìˆ˜ ìˆë‹¤.


> ê²°ë¡ ì ìœ¼ë¡œ 0ì¼ ë•ŒëŠ” ì¸ë±ìŠ¤ì˜ ìˆœì„œë¥¼ ë³´ì¥í•˜ì§€ë§Œ ëª¨ë“  êµ¬ë¬¸ë§ˆë‹¤ ë½ì„ ê±¸ì–´ ê²€ì‚¬í•˜ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì´ ê°€ì¥ ë–¨ì–´ì§€ê³  2ëŠ” ìˆœì°¨ì ì´ì§€ ì•Šê²Œ ì €ì¥ë  ê°€ëŠ¥ì„±ì´ í¬ë‹¤. ê·¸ë˜ì„œ í•„ìëŠ” insert ì‹¤íŒ¨ ì‹œë¥¼ ê·¸ëƒ¥ ë„˜ì–´ê°€ê³  ì„±ëŠ¥ì„ ìœ„í•´ 1ë¡œ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆë‹¤!


## 3. auto_increment_lock_modeë¥¼ ë°”ê¾¸ëŠ” ë°©ë²•


```sql
SET GLOBAL auto_increment_lock_mode = 0
```

ì´ ë°©ë²•ì„ ì‚¬ìš©í–ˆì„ ë•Œ

> Variable 'innodb_autoinc_lock_mode' is a read only variable

ì´ ì—ëŸ¬ê°€ ëœ¬ë‹¤ë©´

ìš°ë¶„íˆ¬ëŠ” /etc/mysql/mysql.conf.d/mysql.cnf ì—ì„œ
windowëŠ” C:\ProgramData\MySQL\MySQL Server 8.0\my.ini ì—ì„œ

**innodb_autoinc_lock_mode = 0** ì„ ì ìœ¼ë©´ ëœë‹¤.


## ì°¸ê³  ë¸”ë¡œê·¸

- https://stuffdrawers.tistory.com/11
- https://kkensu.tistory.com/16
